# Event-Service

This service is responsible for listening to the events generated by [`employee-service`](https://github.com/takeaway/bob-challenge-employee-service) and saving them in its own database. The [`event-service`](https://github.com/takeaway/bob-challenge-event-service/) must also expose a `REST API` that contains just one endpoint:
   - Get all events related to a specific employee in ascending order, i.e, _the oldest event must appear first_. Response should be in JSON Array format.
   
# Solution README

#### Build
 - Run `mvn clean install` in the `employee-service` directory where the pom.xml resides.
 - A jar will be created in the target folder `employee-service/target`
 - Run `mvn clean install` in the `events-service` directory where the pom.xml resides.
 - A jar will be created in the target folder `events-service/target`
 - The next step is to create a docker image for both the services
 - Run `docker build -t employee-service ./` inside the `employee-service` folder where the Dockerfile resides
 - Run `docker build -t events-service ./` inside the `events-service` folder where the Dockerfile resides
 
#### Deployment
 - There is a docker-compose.yml inside the `employee-service` folder
 - This docker-compose.yml contains the following services
     - mysql
     - zookeeper
     - kafka
     - employee-service
     - events-service
 - Run `docker-compose up -d` inside the `employee-service` folder
 - Verify that the employee-service is up by hitting [`employee-service`](http://localhost:8080/swagger-ui.html#/)
 - Verify that the events-service is up by hitting [`events-service`](http://localhost:9090/swagger-ui.html#/)
 - To stop all services run `docker-compose down`
 
#### Authentication
 - There is authentication set up for all PUT/POST/DELETE requests. GET is allowed unauthenticated.
 - On executing these requests, a log-in form will pop up.
 - Username: user and Password: user will give 403, as this user does not have ADMIN role.
 - Use Username: admin and Password: admin for these requests.
 - Ideally you should be able to logout using http://localhost:8080/logout but this does not seem to work at times, so recommendation is to   	 always work in new incognito window to login.

#### Testing
 - For Employee Service, create a department first and then employee. There are validations for some fields. Email needs to be in xyc@abc format, future date is not allowed as birthdate, two employees cannot share same email address. Values that are marked required(*) needs to be provided or else it will result in bad request.
 - For Event Service, if there are no results for a given employee id output is empty list.
   
